<!DOCTYPE html>
<!-- saved from url=(0073)https://lobste.rs/s/ckm4uw/performance_minded_take_on_ios_design#c_itdkfh -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="apple-touch-icon" sizes="57x57" href="https://lobste.rs/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://lobste.rs/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://lobste.rs/apple-touch-icon-144.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://lobste.rs/apple-touch-icon-144.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="always">
  <meta name="theme-color" content="#AC130D">
      <meta name="twitter:card" content="summary">
      <meta name="twitter:site" content="@lobsters">
      <meta name="twitter:title" content="A Performance-minded take on iOS design">
      <meta name="twitter:description" content="1 comment">
      <meta name="twitter:image" content="https://lobste.rs/apple-touch-icon-144.png">
  <link rel="shortcut icon" href="https://lobste.rs/favicon.ico">
    <link rev="canonical" rel="self alternate shorter shorturl shortlink" href="https://lobste.rs/s/ckm4uw">
  <title>A Performance-minded take on iOS design | Lobsters</title>
  <link rel="stylesheet" media="all" href="./A Performance-minded take on iOS design _ Lobsters_files/application-f8e920771e4ee239d4497212012c195adb2948fd9ab76355b92528e0a2177f89.css">
  <meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="3cmu1YcB56B8044IOAXXzFeZbSTG0i4uF4Ja247x1aY6uQPVJgO3+jgKpGacDr7/LDlrZwIr+p5VDKlxiCZJOQ==">
</head>
<body>
  <div id="wrapper">
    <div id="header">
      <div id="headerleft">
        <a id="l_holder" style="background-color: #500000;" href="https://lobste.rs/" title="Lobsters (Current traffic: 0%)"></a>


        <span class="headerlinks">
            <a href="https://lobste.rs/" class="">Home</a>
            <a href="https://lobste.rs/recent" class="">Recent</a>
            <a href="https://lobste.rs/comments" class="">Comments</a>
            <a href="https://lobste.rs/search" class="">Search</a>
        </span>
      </div>

      <div id="headerright">
        <span class="headerlinks">
            <a href="https://lobste.rs/login" class="">Login</a>
        </span>
      </div>

      <div class="clear"></div>
    </div>


    <div id="inside">

      <ol class="stories">
  <li id="story_ckm4uw" data-shortid="ckm4uw" class="story 






">
<div class="story_liner h-entry">
  <div class="voters">
      <a class="upvoter" href="https://lobste.rs/login"></a>
    <div class="score">5</div>
  </div>
  <div class="details">
    <span class="link h-cite u-repost-of">
        <a class="u-url" href="http://robots.thoughtbot.com/post/36591648724/designing-for-ios-graphics-performance" rel="ugc">A Performance-minded take on iOS design</a>
    </span>
      <span class="tags">
          <a class="tag tag_design" title="Visual design" href="https://lobste.rs/t/design">design</a>
          <a class="tag tag_ios" title="Apple iOS" href="https://lobste.rs/t/ios">ios</a>
      </span>
        <a class="domain" href="https://lobste.rs/domain/robots.thoughtbot.com">robots.thoughtbot.com</a>



    <div class="byline">
        <a href="https://lobste.rs/u/kaishin"><img srcset="/avatars/kaishin-16.png 1x, /avatars/kaishin-32.png 2x" class="avatar" alt="kaishin avatar" src="./A Performance-minded take on iOS design _ Lobsters_files/kaishin-16.png" width="16" height="16"></a>
          via
        <a href="https://lobste.rs/u/kaishin" class="u-author h-card ">kaishin</a>

        <span title="2012-11-26 08:43:56 -0600" class="">7 years ago</span>

          |
          <a href="https://archive.md/http%3A%2F%2Frobots.thoughtbot.com%2Fpost%2F36591648724%2Fdesigning-for-ios-graphics-performance" rel="ugc" target="_blank">cached</a>
          <span class="comments_label">
            |
            <a href="https://lobste.rs/s/ckm4uw/performance_minded_take_on_ios_design">
              1 comment</a>
          </span>

    </div>
  </div>
</div>
<a href="https://lobste.rs/s/ckm4uw/performance_minded_take_on_ios_design" class="mobile_comments " style="display: none;">
  <span>1</span>
</a>
</li>

</ol>

<div class="story_content">

</div>

  <ol class="comments comments1">
      <li class="comments_subtree"><div class="comment comment_form_container" data-shortid="">
<form id="edit_comment_" action="https://lobste.rs/comments" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="B5j/BYdjbRayn34OGyx5jCsi0VH/oGx2UkPMIHlx1x6QRtv4nCCbBae4nRuntdWdSJbhOhCTuLy0mz17D20U5A==">

  <input value="ckm4uw" type="hidden" name="story_id" id="story_id">
  <input value="post" type="hidden" name="_method" id="_method">


  <div style="width: 100%;">
      <textarea rows="5" disabled="disabled" placeholder="You must be logged in to leave a comment." name="comment" id="comment"></textarea>

    <p></p>

    <div class="markdown_help_toggler">

      <input type="submit" name="commit" value="Post" class="comment-post" disabled="disabled" data-disable-with="Post">
      &nbsp;
      <button name="button" type="button" class="comment-preview" disabled="disabled">Preview</button>


      <div style="clear: both;"></div>

    </div>
  </div>

  <p></p>
</form></div>
</li>
      


        <li class="comments_subtree">

        <input id="comment_folder_itdkfh" class="comment_folder_button" type="checkbox">

<div id="c_itdkfh" data-shortid="itdkfh" class="comment 
  ">

    <label for="comment_folder_itdkfh" class="comment_folder"></label>

    <div class="voters">
        <a class="upvoter" href="https://lobste.rs/login"></a>
      <div class="score">1</div>
        <span class="downvoter downvoter_stub"></span>
    </div>
    <div class="comment_parent_tree_line
      
      score_shown
      no_children"></div>

  <div class="details">
    <div class="byline">
      <a name="c_itdkfh"></a>

        <label for="comment_folder_itdkfh" class="comment_folder comment_folder_inline"></label>


        <a href="https://lobste.rs/u/andymatuschak"><img srcset="/avatars/andymatuschak-16.png 1x, /avatars/andymatuschak-32.png 2x" class="avatar" alt="andymatuschak avatar" src="./A Performance-minded take on iOS design _ Lobsters_files/andymatuschak-16.png" width="16" height="16"></a>

      <a href="https://lobste.rs/u/andymatuschak" class="">andymatuschak</a>


        <span title="2012-11-27 12:29:50 -0600" class="">7 years ago</span>

        |
        <a href="https://lobste.rs/s/ckm4uw/performance_minded_take_on_ios_design#c_itdkfh">link</a>





        <span class="reason">
        </span>
    </div>
    <div class="comment_text">
        <p>Cross-posted from the comments section there:</p>

<p>[The] advice as far as the button is good here, but I’ve got one small correction and some bonus explanation for interested readers.</p>

<p>I’d like to clarify a few points about offscreen drawing as described in this post. While your list of cases which might elicit offscreen drawing is accurate, there are two grossly different mechanisms being triggered by elements of this list (each with different performance characteristics), and it’s possible that a single view will require both. Those two mechanisms have very different performance considerations.</p>

<p>In particular, a few (implementing drawRect and doing any CoreGraphics drawing, drawing with CoreText [which is just using CoreGraphics]) are indeed “offscreen drawing,” but they’re not what we usually mean when we say that. They’re very different from the rest of the list. When you implement drawRect or draw with CoreGraphics, you’re using the CPU to draw, and that drawing will happen synchronously within your application. You’re just calling some function which writes bits in a bitmap buffer, basically.</p>

<p>The other forms of offscreen drawing happen on your behalf in the render server (a separate process) and are performed via the GPU (not via the CPU, as suggested in the previous paragraph). When the OpenGL renderer goes to draw each layer, it may have to stop for some subhierarchies and composite them into a single buffer. You’d think the GPU would always be faster than the CPU at this sort of thing, but there are some tricky considerations here. It’s expensive for the GPU to switch contexts from on-screen to off-screen drawing (it must flush its pipelines and barrier), so for simple drawing operations, the setup cost may be greater than the total cost of doing the drawing in CPU via e.g. CoreGraphics would have been. So if you’re trying to deal with a complex hierarchy and are deciding whether it’s better to use –[CALayer setShouldRasterize:] or to draw a hierarchy’s contents via CG, the only way to know is to test and measure.</p>

<p>You could certainly end up doing two off-screen passes if you draw via CG within your app and display that image in a layer which requires offscreen rendering. For instance, if you take a screenshot via –[CALayer renderInContext:] and then put that screenshot in a layer with a shadow.</p>

<p>Also: the considerations for shouldRasterize are very different from masking, shadows, edge antialiasing, and group opacity. If any of the latter are triggered, there’s no caching, and offscreen drawing will happen on every frame; rasterization does indeed require an offscreen drawing pass, but so long as the rasterized layer’s sublayers aren’t changing, that rasterization will be cached and repeated on each frame. And of course, if you’re using drawRect: or drawing yourself via CG, you’re probably caching locally. More on this in “Polishing Your Rotation Animations,” WWDC 2012.</p>

<p>Speaking of caching: if you’re doing a lot of this kind of drawing all over your application, you may need to implement cache-purging behavior for all these (probably large) images you’re going to have sitting around on your application’s heap. If you get a low memory warning, and some of these images are not actively being used, it may be best for you to get rid of those stretchable images you drew (and lazily regenerate them when needed). But that may end up just making things worse, so testing is required there too.</p>

    </div>
  </div>
</div>



          <ol class="comments"></ol></li>
  </ol>



      <div id="footer">
          <a href="https://lobste.rs/moderations">Moderation Log</a>
  <a href="https://lobste.rs/hats">Hats</a>
  <a href="https://lobste.rs/tags">Tags</a>

<a href="https://github.com/lobsters/lobsters/wiki">Wiki</a>
<a href="https://lobste.rs/privacy">Privacy</a>
<a href="https://lobste.rs/about">About</a>

      </div>
      <div class="clear"></div>
    </div>
  </div>


</body></html>